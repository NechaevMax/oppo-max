═══════════════════════════════════════════════════════════════════════════
                   ЛАБОРАТОРНАЯ РАБОТА 3: РЕФАКТОРИНГ И ТЕСТЫ
═══════════════════════════════════════════════════════════════════════════

ОПИСАНИЕ ПРОЕКТА
───────────────────────────────────────────────────────────────────────────

Улучшенная версия программы управления меню ресторана с:
✅ Полной обработкой исключений
✅ Валидацией всех входных данных
✅ 25+ модульными тестами (Google Test)
✅ Соответствием C++17 и Google C++ Style Guide
✅ UML диаграммой классов
✅ Полной документацией

═══════════════════════════════════════════════════════════════════════════
ФАЙЛЫ ПРОЕКТА
═══════════════════════════════════════════════════════════════════════════

📁 Основной код:
  ├─ improved_2_LABA.cpp      - основная программа (~370 строк)
  └─ 2 LABA.cpp               - исходная версия (для справки)

📁 Тесты:
  └─ test_2_LABA.cpp          - модульные тесты Google Test (~450 строк)

📁 Сборка и запуск:
  ├─ run_program.bat          - скрипт для компиляции и запуска
  ├─ compile_improved.bat     - альтернативный скрипт компиляции
  └─ CMakeLists.txt           - конфигурация CMake для тестов

📁 Данные:
  └─ menu.txt                 - тестовое меню (4 блюда)

📁 Документация:
  ├─ REPORT.txt               - полный отчет по лабораторной работе
  ├─ API_DOCUMENTATION.txt    - документация API с примерами
  ├─ UML_DIAGRAM.txt          - UML диаграмма классов
  └─ README.md                - этот файл

═══════════════════════════════════════════════════════════════════════════
БЫСТРЫЙ СТАРТ
═══════════════════════════════════════════════════════════════════════════

1. ЗАПУСК ПРОГРАММЫ:
   Двойной клик на run_program.bat

   Или через PowerShell:
   .\run_program.bat

   Или через cmd:
   cmd /c run_program.bat


2. КОМАНДЫ МЕНЮ:
   1 - Просмотреть все блюда
   2 - Отсортировать по времени приготовления
   3 - Фильтр по времени (например, показать блюда за 20 минут)
   4 - Добавить новое блюдо
   5 - Выход


3. ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ:

   Просмотр всех блюд:
   > 1
   выведет:
   название: Борщ, цена: 5.5, время: 30 мин
   название: Салат Цезарь, цена: 7, время: 10 мин
   название: Стейк, цена: 12.5, время: 25 мин
   название: Пельмени, цена: 4, время: 15 мин

   Добавить новое блюдо:
   > 4
   Введите название блюда: Плов
   Введите цену: 8.5
   Введите время приготовления (мин): 45

═══════════════════════════════════════════════════════════════════════════
АРХИТЕКТУРА КЛАССОВ
═══════════════════════════════════════════════════════════════════════════

ИЕРАРХИЯ ИСКЛЮЧЕНИЙ:
  exception (std)
    └─ MenuException
        ├─ FileException         - ошибки файлов
        ├─ ParseException        - ошибки парсинга
        └─ ValidationException   - ошибки валидации

ОСНОВНЫЕ КЛАССЫ:

MenuItem
  - Представляет один элемент меню (блюдо)
  - Поля: name, price, cooking_time
  - Методы: валидация, getters, setters, print()

MenuFileReader
  - Статический класс для парсинга строк меню
  - Формат: menu name="X" price=Y time=Z
  - Обработка сложных названий с пробелами

MenuManager
  - Управляет коллекцией блюд
  - Операции: чтение файла, сортировка, фильтрация, добавление

═══════════════════════════════════════════════════════════════════════════
ТЕСТИРОВАНИЕ
═══════════════════════════════════════════════════════════════════════════

МОДУЛЬНЫЕ ТЕСТЫ (25+ тестов):

✓ MenuItem Construction (10 тестов)
  - Создание с корректными данными
  - Ошибки валидации (пустое имя, отрицательная цена/время)
  - Setters и граничные значения

✓ MenuFileReader Parsing (8 тестов)
  - Парсинг корректных строк
  - Названия с пробелами
  - Различные форматы ошибок
  - Граничные значения

✓ Validation Tests (2 теста)
  - Валидация данных
  - Обработка ошибок

✓ Integration Tests (2 теста)
  - Чтение нескольких элементов из файла
  - Сортировка по времени

✓ Edge Cases (4 теста)
  - Очень большие значения
  - Очень длинные названия
  - Специальные символы

ЗАПУСК ТЕСТОВ:

Требования:
- Google Test библиотека
- CMake 3.14+

Команды:
1. Установить Google Test:
   git clone https://github.com/google/googletest.git
   cd googletest
   mkdir build && cd build
   cmake .. && cmake --build .

2. Скомпилировать тесты:
   cmake -B build -S .
   cmake --build build
   
3. Запустить тесты:
   .\build\Debug\menu_tests.exe

═══════════════════════════════════════════════════════════════════════════
ОБРАБОТКА ОШИБОК
═══════════════════════════════════════════════════════════════════════════

Программа корректно обрабатывает:

❌ Пустое название блюда
   → ValidationException
   → "Ошибка валидации: name - название не может быть пустым"

❌ Отрицательная цена
   → ValidationException
   → "Ошибка валидации: price - цена не может быть отрицательной"

❌ Отрицательное время
   → ValidationException
   → "Ошибка валидации: cooking_time - время не может быть отрицательным"

❌ Неверный формат строки меню
   → ParseException
   → "Ошибка парсинга строки: ..."

❌ Отсутствующий файл меню
   → FileException
   → "Ошибка открытия файла: menu.txt"

❌ Пустое меню
   → MenuException
   → "Не удалось загрузить ни одного элемента меню"

❌ Неверный ввод пользователя
   → ValidationException с описанием ошибки

═══════════════════════════════════════════════════════════════════════════
СООТВЕТСТВИЕ СТАНДАРТАМ
═══════════════════════════════════════════════════════════════════════════

✅ C++17 СТАНДАРТ
  - Использование modern C++ features
  - STL контейнеры и алгоритмы
  - Исключения для обработки ошибок
  - Lambda функции в std::sort

✅ GOOGLE C++ STYLE GUIDE 2.1.3
  - CamelCase для имен классов
  - snake_case для членов класса
  - Правильные комментарии и документация
  - Инкапсуляция и const-correctness

✅ ПРИНЦИПЫ SOLID
  S - Single Responsibility: каждый класс отвечает за одно
  O - Open/Closed: открыто для расширения, закрыто для изменения
  L - Liskov Substitution: исключения используют иерархию
  I - Interface Segregation: четкие интерфейсы методов
  D - Dependency Inversion: зависимость от абстракций

═══════════════════════════════════════════════════════════════════════════
ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ В КОДЕ
═══════════════════════════════════════════════════════════════════════════

ПРИМЕР 1: Создание и валидация
```cpp
try {
    MenuItem item("Борщ", 5.5, 30);
    item.print();  // название: Борщ, цена: 5.5, время: 30 мин
} catch (const ValidationException& e) {
    cerr << "Ошибка: " << e.what() << endl;
}
```

ПРИМЕР 2: Загрузка меню
```cpp
try {
    MenuManager manager;
    manager.readFromFile("menu.txt");
    manager.printAll();
} catch (const FileException& e) {
    cerr << "Файл не найден: " << e.what() << endl;
} catch (const MenuException& e) {
    cerr << "Ошибка: " << e.what() << endl;
}
```

ПРИМЕР 3: Сортировка и фильтрация
```cpp
MenuManager manager;
manager.readFromFile("menu.txt");

// Сортировка
manager.sortByCookingTime();
manager.printAll();

// Фильтрация
manager.filterByTime(20);  // Показать блюда за 20 минут
```

═══════════════════════════════════════════════════════════════════════════
СТРУКТУРА МЕНЮ (menu.txt)
═══════════════════════════════════════════════════════════════════════════

Формат: menu name="название" price=цена time=время

Пример:
```
menu name="Борщ" price=5.5 time=30
menu name="Салат Цезарь" price=7.0 time=10
menu name="Стейк" price=12.5 time=25
menu name="Пельмени" price=4.0 time=15
```

Все значения обязательны!

═══════════════════════════════════════════════════════════════════════════
ВОЗМОЖНЫЕ УЛУЧШЕНИЯ
═══════════════════════════════════════════════════════════════════════════

⬜ Сохранение меню в файл
⬜ Удаление блюд из меню
⬜ Редактирование существующих блюд
⬜ Поиск по названию
⬜ Фильтрация по цене
⬜ Сортировка по цене
⬜ Графический интерфейс (Qt/wxWidgets)
⬜ База данных (SQLite)
⬜ REST API

═══════════════════════════════════════════════════════════════════════════
СИСТЕМНЫЕ ТРЕБОВАНИЯ
═══════════════════════════════════════════════════════════════════════════

❌ ОС: Windows 10/11
❌ Компилятор: MSVC 2022 (C++17 or higher)
❌ Память: 50 MB
❌ Диск: 5 MB для программы + тестов

Для тестирования:
❌ Google Test (можно установить через CMake)
❌ CMake 3.14+

═══════════════════════════════════════════════════════════════════════════
ОТЛАДКА И ЛОГИРОВАНИЕ
═══════════════════════════════════════════════════════════════════════════

Программа выводит информационные сообщения:
- "Загружаю меню из файла menu.txt..."
- "Блюдо '...' успешно добавлено!"
- Ошибки с описанием и номером строки при парсинге

Для детального логирования можно добавить вывод дебаг информации
в методы класса.

═══════════════════════════════════════════════════════════════════════════
ПОДДЕРЖКА И КОНТАКТЫ
═══════════════════════════════════════════════════════════════════════════

GitHub репозиторий: https://github.com/NechaevMax/oppo-max

═══════════════════════════════════════════════════════════════════════════
ЛИЦЕНЗИЯ
═══════════════════════════════════════════════════════════════════════════

Код предоставляется в образовательных целях.

═══════════════════════════════════════════════════════════════════════════
